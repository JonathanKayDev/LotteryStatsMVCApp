@using LotteryStatsMVCApp.Models.Enums
@model LotteryStatsMVCApp.Models.ViewModels.GameStatsViewModel

@{
    ViewData["Title"] = "Game Stats";

    List<BallModel> freqMainBall = Model.MainBallStats.OrderByDescending(x => x.Frequency).ToList();
    List<BallModel> absentMainBall = Model.MainBallStats.OrderByDescending(x => x.Absence).ToList();
    List<BallModel> freqBonusBall = new();
    List<BallModel> absentBonusBall = new();

    if (Model.NumberOfBonusBalls > 0)
    {
        freqBonusBall = Model.BonusBallStats.OrderByDescending(x => x.Frequency).ToList();
        absentBonusBall = Model.BonusBallStats.OrderByDescending(x => x.Absence).ToList();
    }

    string ballImage = "";
    string pageTitle = "";

    switch(Model.GameName)
    {
        case nameof(Games.Euromillions):
            ballImage = "/img/LottoBall_E.svg";
            pageTitle = "Euromillions";
            break;
        case nameof(Games.EuromillionsHotpicks):
            ballImage = "/img/LottoBall_EH.svg";
            pageTitle = "Euromillions Hotpicks";
            break;
        case nameof(Games.Lotto):
            ballImage = "/img/LottoBall_L.svg";
            pageTitle = "Lotto";
            break;
        case nameof(Games.LottoHotpicks):
            ballImage = "/img/LottoBall_LH.svg";
            pageTitle = "Lotto Hotpicks";
            break;
        case nameof(Games.SetForLife):
            ballImage = "/img/LottoBall_S.svg";
            pageTitle = "Set for Life";
            break;
        case nameof(Games.Thunderball):
            ballImage = "/img/LottoBall_T.svg";
            pageTitle = "Thunderball";
            break;
        default:
            ballImage = "/img/LottoBall.svg";
            break;
    }

}

<h1>@pageTitle</h1>

<h2>Common</h2>
<h3>Main Balls</h3>
<div class="row" style="max-width: 800px">
    @for (var i = 0; i < Model.NumberOfMainBalls; i++)
    {
        <div class="col-2 ball-container">
            <img src=@ballImage style="width: 100%" class="ball-image"/>
            <div class="ball-text text-dark">@freqMainBall[i].Number.ToString()</div>
        </div>
        //<p>frequency: @freqMainBall[0].Frequency.ToString()</p>
    }
</div>

@if (Model.NumberOfBonusBalls > 0)
{
    <h3 class="mt-4">Bonus Balls</h3>

    <div class="row" style="max-width: 800px">
        @for (var i = 0; i < Model.NumberOfBonusBalls; i++)
        {
            <div class="col-2 ball-container">
                <img src=@ballImage style="width: 100%"/>
                <div class="ball-text text-dark">@freqBonusBall[i].Number.ToString()</div>
            </div>
            //<p>frequency: @freqBonusBall[0].Frequency.ToString()</p>
        }
    </div>
}

<h2>Absent</h2>
<h3>Main Balls</h3>
<div class="row" style="max-width: 800px">
    @for (var i = 0; i < Model.NumberOfMainBalls; i++)
    {
        <div class="col-2 ball-container">
            <img src=@ballImage style="width: 100%"/>
            <div class="ball-text text-dark">@absentMainBall[i].Number.ToString()</div>
        </div>
        //<p>frequency: @absentMainBall[0].Absence.ToString()</p>
    }
</div>

@if (Model.NumberOfBonusBalls > 0)
{
    <h3>Bonus Balls</h3>

    <div class="row" style="max-width: 800px">
        @for (var i = 0; i < Model.NumberOfBonusBalls; i++)
        {
            <div class="col-2 ball-container">
                <img src=@ballImage style="width: 100%"/>
                <div class="ball-text text-dark">@absentBonusBall[i].Number.ToString()</div>
            </div>
            //<p>absence: @absentBonusBall[0].Absence.ToString()</p>
        }
    </div>
}
